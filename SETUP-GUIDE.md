# üöÄ Setup Guide - AI Intelligence Hub

Follow these steps to get your AI Intelligence Hub up and running!

## üìã Prerequisites

- ‚úÖ Node.js installed (v16+)
- ‚úÖ Docker Desktop installed and running
- ‚úÖ Git (optional, for version control)

## Step 1: Get Your Groq API Key (Free) üîë

**Why Groq?** It's free, fast, and perfect for AI summarization!

1. **Visit**: https://console.groq.com/
2. **Sign up** for a free account (no credit card needed)
3. **Navigate to**: API Keys section
4. **Click**: "Create API Key"
5. **Copy** your API key (you'll need it in Step 2)

> üí° **Alternative**: If you prefer OpenAI, get a key from https://platform.openai.com/ (requires payment)

## Step 2: Configure Environment Variables ‚öôÔ∏è

### For Server (Backend)

1. **Navigate to server folder**:
   ```powershell
   cd server
   ```

2. **Create `.env` file** (copy from example):
   ```powershell
   # If .env doesn't exist, create it
   ```

3. **Add these variables** to `server/.env`:
   ```bash
   # Server Configuration
   PORT=5000
   NODE_ENV=development

   # MongoDB (for local development)
   MONGODB_URI=mongodb://localhost:27017/ai-intelligence-hub

   # CORS (comma-separated)
   CORS_ORIGIN=http://localhost:5173,http://localhost:80

   # AI Service Configuration
   AI_PROVIDER=groq

   # Groq API Key (paste your key here)
   GROQ_API_KEY=gsk_your_actual_api_key_here
   GROQ_MODEL=mixtral-8x7b-32768

   # AI Features
   ENABLE_AI_SUMMARY=true
   ENABLE_AI_PRIORITY=false
   ```

   > üìù **Replace** `gsk_your_actual_api_key_here` with your actual Groq API key from Step 1!

### For Client (Frontend) - Optional

If running frontend separately (not in Docker):

1. **Navigate to client folder**:
   ```powershell
   cd client
   ```

2. **Create `.env` file**:
   ```bash
   VITE_API_URL=http://localhost:5000/api
   ```

## Step 3: Choose Your Setup Method üéØ

You have **two options**:

### Option A: Docker (Recommended) üê≥

**Best for**: Production, easy deployment, everything in containers

#### Start Everything:

```powershell
# From project root
docker-compose up -d
```

This starts:
- ‚úÖ MongoDB (port 27017)
- ‚úÖ Backend API (port 5000)
- ‚úÖ Frontend (port 80)
- ‚úÖ n8n (port 5678)

#### Check Status:

```powershell
docker-compose ps
```

#### View Logs:

```powershell
# All services
docker-compose logs -f

# Just the server
docker-compose logs -f server
```

#### Access Your App:

- **Frontend Dashboard**: http://localhost
- **Backend API**: http://localhost:5000
- **n8n**: http://localhost:5678 (admin/admin123)

---

### Option B: Local Development üíª

**Best for**: Development, debugging, faster iteration

#### Terminal 1 - MongoDB:

```powershell
# Make sure MongoDB is running locally
# If using Docker for just MongoDB:
docker run -d -p 27017:27017 --name mongodb mongo:7.0
```

#### Terminal 2 - Backend:

```powershell
cd server
npm install
npm start
```

You should see:
```
‚úÖ MongoDB Connected: localhost
Server is running on port 5000
```

#### Terminal 3 - Frontend:

```powershell
cd client
npm install
npm run dev
```

You should see:
```
VITE ready in xxx ms
‚ûú  Local:   http://localhost:5173/
```

#### Access Your App:

- **Frontend Dashboard**: http://localhost:5173
- **Backend API**: http://localhost:5000

---

## Step 4: Test Everything ‚úÖ

### Test 1: Health Check

```powershell
# Test backend
Invoke-RestMethod http://localhost:5000/health
```

Should return:
```json
{
  "status": "healthy",
  "service": "AI Intelligence Hub API",
  "database": "connected"
}
```

### Test 2: Create a Lead (with AI)

```powershell
$body = @{
    source = "Test Source"
    message = "I'm interested in your AI solutions for my business. Can we schedule a call?"
    priority = "High"
} | ConvertTo-Json

Invoke-RestMethod -Uri http://localhost:5000/api/v1/leads `
    -Method Post `
    -ContentType "application/json" `
    -Body $body
```

**Expected**: You should get a response with an `aiSummary` field generated by AI!

### Test 3: View Leads

```powershell
Invoke-RestMethod http://localhost:5000/api/v1/leads
```

### Test 4: Open Dashboard

Open your browser:
- **Docker**: http://localhost
- **Local**: http://localhost:5173

You should see:
- ‚úÖ Statistics cards
- ‚úÖ Lead cards
- ‚úÖ Green "Live" indicator (real-time updates)
- ‚úÖ Auto-refreshing every 5 seconds

---

## Step 5: Configure n8n (Optional) üîó

If you want to automate lead creation:

1. **Open n8n**: http://localhost:5678
2. **Login**: admin / admin123
3. **Create a workflow**:
   - Add "Webhook" node
   - Set URL: `http://server:5000/api/v1/leads` (in Docker)
   - Or: `http://localhost:5000/api/v1/leads` (local)
4. **Add HTTP Request node** to send data

---

## üêõ Troubleshooting

### Issue: "MongoDB connection failed"

**Solution**:
```powershell
# Check if MongoDB is running
docker ps | findstr mongodb

# If not, start it
docker-compose up -d mongodb
```

### Issue: "AI summarization not working"

**Check**:
1. API key is set in `server/.env`
2. Key is correct (starts with `gsk_` for Groq)
3. Check server logs: `docker-compose logs server | findstr -i "ai"`

### Issue: "Frontend can't connect to API"

**Check**:
1. Backend is running on port 5000
2. CORS is configured correctly
3. API URL in frontend matches backend URL

### Issue: "Port already in use"

**Solution**:
```powershell
# Find what's using the port
netstat -ano | findstr :5000

# Change port in server/.env
PORT=5001
```

---

## üìö Next Steps

### 1. Create Your First Lead

Use the API or n8n to create leads and watch them appear in real-time on the dashboard!

### 2. Customize

- **Change polling interval**: Edit `POLL_INTERVAL` in `client/src/components/Dashboard.jsx`
- **Modify AI prompts**: Edit `server/services/aiService.js`
- **Add more fields**: Update `server/models/Lead.js`

### 3. Deploy to Production

See `PRODUCTION-SETUP.md` for production deployment guide.

---

## ‚úÖ Quick Checklist

- [ ] Got Groq API key
- [ ] Created `server/.env` with API key
- [ ] Started services (Docker or local)
- [ ] Tested health endpoint
- [ ] Created a test lead
- [ ] Opened dashboard and saw real-time updates
- [ ] Everything working! üéâ

---

## üÜò Need Help?

1. **Check logs**: `docker-compose logs -f`
2. **Verify environment**: Make sure `.env` file exists and has correct values
3. **Test endpoints**: Use the test commands above
4. **Read documentation**: See `PRODUCTION-SETUP.md` for more details

---

**You're all set!** üöÄ

Your AI Intelligence Hub is ready to process leads with AI-powered summarization!
